# 订单管理

订单管理模块用于处理用户的购买订单,是系统收入和业务流程的核心环节。

## 功能概述

### 订单列表

查看和管理所有订单:

- **订单号**: 唯一的订单标识
- **用户信息**: 购买用户的姓名和邮箱
- **产品信息**: 购买的产品名称和规格
- **订单金额**: 实付金额和原价
- **支付方式**: 支付宝/微信/虚拟货币等
- **订单状态**: 待支付/已支付/已完成/已取消/已退款
- **创建时间**: 订单创建的时间
- **支付时间**: 订单支付完成的时间

### 订单筛选

快速查找特定订单:

- **按状态筛选**: 待支付/已支付/已完成等
- **按时间范围**: 今天/本周/本月/自定义
- **按支付方式**: 按支付渠道筛选
- **按用户**: 查看特定用户的订单
- **按产品**: 查看特定产品的销售订单
- **按金额**: 按订单金额范围筛选

### 创建订单

为用户手动创建订单:

#### 选择用户

- 搜索已存在的用户
- 或创建新用户
- 填写用户基本信息

#### 选择产品

- 从产品列表选择套餐
- 设置购买数量
- 查看价格详情

#### 优惠设置

- 应用优惠券
- 手动折扣
- 余额抵扣
- 积分抵扣

#### 订单备注

- 添加订单备注
- 标记特殊订单
- 记录沟通内容

### 订单详情

查看订单的完整信息:

#### 基本信息

- 订单号和创建时间
- 用户信息和联系方式
- 产品详情和规格
- 订单金额明细

#### 支付信息

- 支付方式和支付流水号
- 支付时间和支付状态
- 第三方平台订单号
- 支付凭证(如有)

#### 订单状态

- 当前订单状态
- 状态变更历史
- 操作日志记录

#### 售后信息

- 退款申请记录
- 客服沟通记录
- 问题处理进度

## 订单操作

### 订单审核

审核待处理的订单:

- **自动审核**: 在线支付自动完成
- **人工审核**: 银行转账等需要人工确认
- **审核通过**: 开通服务并通知用户
- **审核拒绝**: 拒绝订单并说明原因

### 订单处理

处理已支付的订单:

- **自动开通**: 支付完成自动激活服务
- **手动开通**: 管理员手动开通服务
- **延迟开通**: 设置未来开通时间
- **批量处理**: 批量处理多个订单

### 订单取消

取消未支付或异常的订单:

- **用户取消**: 用户主动取消订单
- **超时取消**: 未在规定时间内支付
- **管理员取消**: 管理员手动取消
- **系统取消**: 检测到异常自动取消

### 订单退款

处理退款请求:

#### 退款审核

- 查看退款原因
- 评估退款合理性
- 决定是否同意退款

#### 退款处理

- **全额退款**: 退还全部订单金额
- **部分退款**: 退还部分金额
- **退款到余额**: 退款到用户账户余额
- **原路退回**: 退款到原支付方式

#### 退款后处理

- 回收已开通的服务
- 更新用户账户状态
- 记录退款原因和处理结果

## 支付管理

### 支付方式

支持多种支付渠道:

- **支付宝**: 扫码支付/当面付
- **微信支付**: 扫码支付/H5 支付
- **虚拟货币**: USDT/BTC 等
- **银行转账**: 线下转账
- **余额支付**: 使用账户余额

### 支付配置

配置支付渠道参数:

- **商户信息**: 商户号/密钥
- **支付回调**: 异步通知 URL
- **支付限额**: 最低/最高支付金额
- **支付手续费**: 手续费率和承担方

### 支付回调

处理支付平台回调:

- **验证签名**: 验证回调数据真实性
- **更新状态**: 更新订单支付状态
- **开通服务**: 自动开通购买的服务
- **发送通知**: 通知用户支付成功

## 订单统计

### 销售统计

分析订单销售数据:

- **订单数量**: 总订单数和增长趋势
- **订单金额**: 总销售额和平均客单价
- **转化率**: 订单转化率分析
- **复购率**: 用户复购情况

### 支付统计

分析支付方式使用:

- **各支付方式占比**: 支付宝/微信等占比
- **支付成功率**: 各渠道支付成功率
- **支付时效**: 从下单到支付的时长

### 产品统计

分析产品销售情况:

- **热销产品**: 销量最高的产品
- **收入贡献**: 各产品收入占比
- **库存预警**: 库存不足的产品

## 订单导出

导出订单数据用于分析:

### 导出选项

- **导出格式**: Excel/CSV/PDF
- **导出范围**: 全部/筛选结果
- **导出字段**: 自定义导出字段
- **数据脱敏**: 敏感信息脱敏处理

### 导出用途

- **财务对账**: 核对收入数据
- **数据分析**: 进行业务分析
- **报表生成**: 生成销售报表
- **备份存档**: 数据备份归档

## 异常订单处理

### 订单异常类型

- **重复支付**: 同一订单多次支付
- **支付未到账**: 已支付但系统未收到
- **金额不符**: 支付金额与订单金额不一致
- **恶意订单**: 刷单或欺诈订单

### 处理流程

1. **识别异常**: 系统自动标记或人工发现
2. **调查原因**: 查看支付记录和日志
3. **联系用户**: 与用户沟通确认情况
4. **处理方案**: 退款/补发/人工处理
5. **记录备案**: 记录处理过程和结果

## 订单安全

### 风控措施

- **实名认证**: 要求用户实名认证
- **支付限额**: 设置单笔支付限额
- **异常检测**: 检测异常支付行为
- **黑名单**: 拉黑恶意用户

### 防刷单

- **频率限制**: 限制下单频率
- **IP 检测**: 检测异常 IP 行为
- **设备指纹**: 识别重复设备
- **人工审核**: 可疑订单人工审核

## 最佳实践

- 及时处理待审核订单
- 保证支付回调的稳定性
- 定期核对财务数据
- 快速响应退款请求
- 记录完整的操作日志
- 分析订单数据优化运营

## 常见问题

### 支付成功但未到账

处理步骤:

1. 查看支付平台订单状态
2. 检查支付回调日志
3. 手动触发回调处理
4. 联系支付平台客服

### 订单无法取消

可能原因:

1. 订单已经支付
2. 服务已经开通
3. 系统权限不足

### 退款失败

检查以下几点:

1. 退款接口配置是否正确
2. 账户余额是否充足
3. 退款信息是否完整
4. 是否超过退款时限

## 下一步

- [优惠券管理](/zh/admin/commerce/coupons) - 创建优惠活动
- [用户管理](/zh/admin/users-support/users) - 管理用户账户
- [财务统计](/zh/admin/logs/balance) - 查看收支明细
