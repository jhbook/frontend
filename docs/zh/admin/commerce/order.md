<div v-pre>

# 订单管理

查看系统中所有用户订单,支持订单状态修改和详细信息查看。这是一个只读为主的订单查询页面,主要用于订单信息查看和异常处理。

## 页面功能

订单管理页面是一个简单的订单查询和状态管理工具,提供以下功能:

1. **订单列表查看** - 表格展示所有订单
2. **状态修改** - 修改特定状态的订单
3. **金额详情** - 悬浮卡片查看价格明细
4. **筛选搜索** - 快速定位目标订单

## 表格列说明

### 订单号
系统生成的唯一订单编号,用于订单追踪和查询。

### 类型
订单的业务类型:
- **新购** - 用户首次购买套餐
- **续费** - 为现有订阅延长时间
- **重置流量** - 单独购买流量重置
- **充值** - 充值账户余额

### 订阅
显示关联的产品信息:
- 新购/续费/重置流量订单: 显示 `产品名 × 数量`
- 充值订单: 显示 "充值"

### 金额
订单总金额,点击可查看详细价格构成。

### 用户
下单用户信息,点击可查看用户详情。

### 更新时间
订单最后状态变更时间。

### 状态
订单当前状态,部分状态支持修改:
- **待支付** (橙色) - 可修改
- **已支付** (绿色) - 只读
- **已取消** (灰色) - 可修改
- **已关闭** (红色) - 可修改
- **已完成** (绿色) - 只读

## 核心功能

### 1. 订单状态修改

**可修改状态**: 待支付、已取消、已关闭

操作步骤:
1. 找到需要修改的订单
2. 点击状态列的下拉选择器
3. 选择新的状态
4. 系统自动保存并刷新

**不可修改状态**: 已支付、已完成

这两种状态显示为只读标签,无法修改。

**常见操作**:
- 待支付 → 已支付: 手动标记支付完成
- 待支付 → 已取消: 取消超时订单
- 待支付 → 已关闭: 关闭异常订单
- 已取消 → 待支付: 恢复误操作订单

### 2. 查看金额详情

鼠标悬停在金额上,显示完整价格明细:

**价格构成**:
- 订阅价格 - 产品原价
- 折扣金额 - 批量购买折扣
- 优惠券折扣 - 使用的优惠券
- 手续费 - 支付平台费用
- 总计 - 实际支付金额

**其他信息**:
- 交易号 - 第三方支付交易编号
- 支付方式 - 使用的支付平台

### 3. 筛选和搜索

**状态筛选**: 选择订单状态查看对应订单

**产品筛选**: 选择产品套餐查看相关订单

**用户筛选**: 输入用户 ID 查看该用户所有订单

**关键词搜索**: 输入订单号精确查找

可同时使用多个筛选条件。

## 使用场景

### 场景一: 手动标记支付完成

用户支付成功但订单状态未自动更新:

1. 使用订单号搜索找到订单
2. 点击金额查看交易号
3. 确认第三方支付平台已收款
4. 点击状态下拉选择 "已支付"
5. 系统自动处理并分配权益

### 场景二: 取消超时订单

定期清理超时未支付订单:

1. 筛选 "待支付" 状态
2. 查看更新时间判断是否超时
3. 点击状态选择 "已取消"
4. 订单标记为已取消

### 场景三: 用户订单查询

用户咨询订单问题:

1. 在用户筛选中输入用户 ID
2. 查看该用户所有订单
3. 找到对应订单查看状态
4. 点击金额查看详细信息
5. 根据情况处理问题

### 场景四: 产品销售查询

查看某个产品的销售情况:

1. 在产品筛选中选择套餐
2. 查看该产品的所有订单
3. 查看不同状态的订单数量
4. 分析销售趋势

## 注意事项

1. **只能修改部分状态** - 仅待支付、已取消、已关闭可修改
2. **已支付不可改** - 已支付和已完成订单不可修改
3. **修改需谨慎** - 状态修改会触发权益变更
4. **核对支付** - 修改为已支付前务必确认实际收款
5. **价格明细** - 通过金额悬浮卡片核对价格计算
6. **用户问题** - 使用用户筛选快速查询用户订单

</div>
