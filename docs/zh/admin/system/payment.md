<div v-pre>

# 支付管理

管理平台支持的支付方式,查看支付渠道统计。

## 支付方式表格

### 表格列说明

#### 状态 (Status)
开关按钮,控制支付方式是否启用。

#### 名称 (Name)
支付方式名称。

#### 类型 (Type)
支付渠道类型:
- 支付宝 (Alipay)
- 微信支付 (WeChat Pay)
- PayPal
- Stripe
- 加密货币 (Crypto)

#### 配置 (Configuration)
查看支付方式的配置状态。

#### 更新时间 (Updated At)
最后更新时间。

### 表格操作

#### 编辑
打开侧边抽屉修改支付配置:
- API密钥
- 商户号
- 回调URL
- 手续费率
- 最小/最大金额

#### 删除
删除支付方式(需确认)。

#### 创建支付方式
添加新的支付渠道。

## 支付统计面板

显示各支付方式的统计数据:

### 总交易额
各支付方式的累计交易金额。

### 交易笔数
各支付方式的交易次数。

### 成功率
支付成功率统计。

### 手续费
各支付方式产生的手续费。

## 支付配置表单

### 基本信息
- 支付方式名称
- 支付类型
- 显示图标
- 显示顺序

### API配置
不同支付方式需要不同配置:

**支付宝**:
- App ID
- 商户私钥
- 支付宝公钥
- 回调URL

**微信支付**:
- 商户号
- API密钥
- App ID
- App Secret
- 证书文件

**PayPal**:
- Client ID
- Client Secret
- Sandbox模式

**Stripe**:
- Publishable Key
- Secret Key
- Webhook Secret

**加密货币**:
- 钱包地址
- API密钥
- 确认区块数

### 交易设置
- 最小支付金额
- 最大支付金额
- 手续费率
- 支付超时时间

## 使用场景

### 场景一: 配置支付宝

**创建支付方式**:
- 名称: 支付宝
- 类型: Alipay
- App ID: 2021xxx
- 商户私钥: [私钥内容]
- 支付宝公钥: [公钥内容]
- 回调URL: https://myvpn.com/callback/alipay
- 最小金额: 1元
- 最大金额: 10000元
- 手续费率: 0.6%
- 状态: 启用

### 场景二: 配置Stripe

**创建支付方式**:
- 名称: 信用卡支付
- 类型: Stripe
- Publishable Key: pk_live_xxx
- Secret Key: sk_live_xxx
- Webhook Secret: whsec_xxx
- 回调URL: https://myvpn.com/callback/stripe
- 最小金额: $1
- 最大金额: $1000
- 手续费率: 2.9% + $0.30
- 状态: 启用

### 场景三: 配置加密货币支付

**创建支付方式**:
- 名称: USDT支付
- 类型: Crypto
- 币种: USDT (TRC-20)
- 钱包地址: TXxx...
- API密钥: [可选]
- 确认区块数: 1
- 最小金额: 10 USDT
- 汇率API: 实时获取
- 状态: 启用

## 支付回调

### 回调处理
平台自动处理支付回调:
1. 验证回调签名
2. 更新订单状态
3. 发放用户余额
4. 发送通知邮件

### 回调日志
查看支付回调日志:
- 回调时间
- 支付状态
- 订单信息
- 错误信息(如有)

## 重要提示

1. **密钥安全**: 妥善保管API密钥和证书
2. **回调验证**: 必须验证回调签名防止伪造
3. **测试环境**: 先在测试环境验证配置
4. **HTTPS要求**: 回调URL必须使用HTTPS
5. **手续费**: 计算好手续费避免亏损
6. **金额限制**: 合理设置最小/最大支付金额
7. **超时处理**: 设置合理的支付超时时间
8. **汇率更新**: 加密货币需要实时汇率
9. **证书更新**: 定期更新支付证书
10. **备用渠道**: 配置多个支付方式提高可用性

</div>
